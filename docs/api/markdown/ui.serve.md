---
title: UI packages Serve and Metadata REST API (IF.GUI.SERVE.STATIC,
  IF.GUI.SERVE.PACKAGE.META) v1.0.0
language_tabs:
  - javascript: JavaScript
language_clients:
  - javascript: ""
toc_footers: []
includes: []
search: false
highlight_theme: darkula
headingLevel: 2

---

<!-- Generator: Widdershins v4.0.1 -->

# UI packages Serve and Metadata REST API (IF.GUI.SERVE.STATIC, IF.GUI.SERVE.PACKAGE.META) v1.0.0 {#ui-packages-serve-and-metadata-rest-api-if-gui-serve-static-if-gui-serve-package-meta-}

> Scroll down for code samples, example requests and responses. Select a language for code samples from the tabs above or the mobile navigation menu.

# Introduction

Interface, provided by GAS backend for GAS frontend (Portal GUI), for exposing and serving UI packages.

## Terms

- **UI Serve Interface**: The interface providing access to static content contributed by Micro-services. All static content paths are relative to this URI.
- **Package**: A reusable, shared package exposed by a Micro-service. A package can contain one or more ES modules, and can contain static assets (CSS, images, etc.).
- **ES Module (ESM)**: Part of a package, this is the atomic entity which is loaded by the browser. ES Module specification is based on W3C standards.
  <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules>
- **Import-Map**: A specific JSON construct which alters the browser ESM resolution logic, by defining string-URL mappings.
  It is based on a standard draft: <https://wicg.github.io/import-maps/>
- **Reverse-Proxy**: A proxy service which transparently forward requests to other backend services and return responses to the clients.

Base URLs:

* [/ui-serve/v1](/ui-serve/v1)

Email: <a href="mailto:PDLSCRUMNW@pdl.internal.ericsson.com">Smart Insights Team</a>

# IF.GUI.SERVE.STATIC {#ui-packages-serve-and-metadata-rest-api-if-gui-serve-static-if-gui-serve-package-meta--if-gui-serve-static}

Static assets exposure API, which implements a full reverse-proxy functionality between UI clients and domain services.

## Fetch static asset {#opIdfetchStaticAsset}

`GET /static/{globalUniqueURI}`

Act as a reverse-proxy and returns a requested static asset from a domain service identified by `globalUniqueURI`.
This endpoint is used _internally_ by the browser when resolving module identifiers to URLs by using the import-map generated by the `/import-map` API.

**Note:** the mapping of static assets to globally unique URLs (`globalUniqueURI`) is depending on the actual implementation, which **MIGHT** change in the future.
This endpoint **SHOULD NOT** be used directly at client side as backward compatibility is not guaranteed in `globalUniqueURI` resolution logic.

Currently the `globalUniqueURI` contains a unique `serviceId` which identifies a domain service, and `filePath` which is the path to the requested file, relative to
the root of the webserver serving the static asset for the domain service: `{serviceId}/{filePath}`

### Parameters {#fetch-static-asset-parameters}

|Name|In|Type|Required|Description|
|---|---|---|---|---|
|`globalUniqueURI`|path|string|true|The name of a static asset|

### Responses {#fetch-static-asset-responses}

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK - The requested static asset|None|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request - Request path doesn't match the pattern or file path is missing|None|
|404|[Not Found](https://tools.ietf.org/html/rfc7231#section-6.5.4)|Not Found - The requested static asset is not found|None|
|504|[Gateway Time-out](https://tools.ietf.org/html/rfc7231#section-6.6.5)|The target domain service is down, static asset cannot be fetched from it|None|

<aside class="success">
This operation does not require authentication
</aside>

# IF.GUI.SERVE.PACKAGE.META {#ui-packages-serve-and-metadata-rest-api-if-gui-serve-static-if-gui-serve-package-meta--if-gui-serve-package-meta}

Package Meta API, which gives meta information about discovered packages.

## Get import-map {#opIdgetImportMap}

`GET /import-map`

Returns the import-map which is generated from the overall package list fetched from domain services.
Contains multiple entries for each package, and also defines the scopes based on the required dependencies.

Each package will have multiple entries to support different ESM import use-cases:
  - `packageName` -> load the main module
  - `packageName/` -> enable loading additional assets: e.g. `packageName/secondModule.js`
  - `packageName@version` -> load the main module from the exact package version
  - `packageName@version/` -> access the exact package version

Scopes are defined based on the package's dependencies list. The exposed URL to the package folder is used at the scope definitions.

> Example responses

> OK

```json
{
  "imports": {
    "@eui/base": "/ui-serve/v1/static/domain-1/libs/@eui/libs/2.0.0/main.js",
    "@eui/base/": "/ui-serve/v1/static/domain-1/libs/@eui/libs/2.0.0/",
    "@eui/base@2.0.0": "/ui-serve/v1/static/domain-1/libs/@eui/libs/2.0.0/main.js",
    "@eui/base@2.0.0/": "/ui-serve/v1/static/domain-1/libs/@eui/libs/2.0.0/",
    "dashboardApp": "/ui-serve/v1/static/domain-2/apps/dashboardApp/dashboardApp.js",
    "dashboardApp/": "/ui-serve/v1/static/domain-2/apps/dashboardApp/",
    "dashboardApp@1.0.0": "/ui-serve/v1/static/domain-2/apps/dashboardApp/dashboardApp.js",
    "dashboardApp@1.0.0/": "/ui-serve/v1/static/domain-2/apps/dashboardApp/"
  },
  "scopes": {
    "/ui-serve/v1/static/domain-2/apps/dashboardApp/": {
      "@eui/base": "/ui-serve/v1/static/domain-2/libs/@eui/libs/1.0.0/main.js",
      "@eui/base/": "/ui-serve/v1/static/domain-2/libs/@eui/libs/1.0.0/"
    }
  }
}
```

### Responses {#get-import-map-responses}

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|Inline|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request - Path is incorrect|None|

### Response Schema {#get-import-map-response-schema}

ESM Import map schema, based on the specification (https://wicg.github.io/import-maps/)

Status Code **200**

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|`» imports`|object|true|none|A specifier map which contains string-URL mappings.|
|`»» **additionalProperties**`|string|false|none|A moduleString-URL entry, where the key can be used in ESM import expressions which is resolved to URL. Multiple strings **MAY** resolve to the same URL.|
|`» scopes`|object|true|none|Ordered map of URLs to specifier maps.|
|`»» **additionalProperties**`|object|false|none|A scope entry of URL-specifier map pairs. The URL defines the module scope where the specifier map **WILL** override the global import definitions.|
|`»»» **additionalProperties**`|string|false|none|A moduleString-URL entry, which **MUST** be applied in the current URL scope.|

<aside class="success">
This operation does not require authentication
</aside>

## Get map of packages {#opIdgetPackagesMap}

`GET /list-packages`

Returns a list of metadata from config.package.json files fetched from domain services.

> Example responses

> OK

```json
{
  "demo-ui-service-enm": {
    "name": "demo-ui-service-enm",
    "version": "1.0.0-0",
    "protocol": "http",
    "serviceurl": "demo-ui-service-enm-http:4000",
    "ingressBaseurl": "http://enm.demo-ui-service-enm.nip.io/domainapp_enm/",
    "uiContentConfigContext": "/other-path",
    "uid": "demo-ui-service-enm-1.0.0-0",
    "meta": {
      "modules": [
        {
          "name": "app-1",
          "version": "1.0.0",
          "path": "/apps",
          "main": "app-1.js"
        },
        {
          "name": "comp-c",
          "version": "3.0.0",
          "path": "/components",
          "main": "comp-c.js",
          "dependencies": {
            "framework": "1.1.0"
          }
        }
      ]
    }
  },
  "demo-ui-service-ecm": {
    "name": "demo-ui-service-ecm",
    "version": "1.0.0-0",
    "protocol": "http",
    "serviceurl": "demo-ui-service-ecm-http:4000",
    "ingressBaseurl": "http://ecm.demo-ui-service-ecm.nip.io/ecm/",
    "uiContentConfigContext": "/other-path",
    "uid": "demo-ui-service-ecm-1.0.0-0",
    "meta": {
      "modules": [
        {
          "name": "app-1",
          "version": "1.0.0",
          "path": "/apps",
          "main": "app-1.js"
        }
      ]
    }
  }
}
```

### Responses {#get-map-of-packages-responses}

|Status|Meaning|Description|Schema|
|---|---|---|---|
|200|[OK](https://tools.ietf.org/html/rfc7231#section-6.3.1)|OK|None|
|400|[Bad Request](https://tools.ietf.org/html/rfc7231#section-6.5.1)|Bad Request - Path is incorrect|None|

### Response Schema {#get-map-of-packages-response-schema}

<aside class="success">
This operation does not require authentication
</aside>

# Schemas

## config.package.json {#schema-config.package.json}

```json
{
  "version": "string",
  "packages": [
    {
      "version": "string",
      "name": "string",
      "path": "string",
      "main": "string",
      "dependencies": {
        "property1": "string",
        "property2": "string"
      }
    }
  ]
}

```

File descriptor for shared packages compatible with UI micro front-ends.
This file includes meta information of shared packages served by the current service for UI micro front-ends.

This file **MUST** be named as `config.package.json` and **MUST** be accessible from the service root context path.

### Properties

|Name|Type|Required|Restrictions|Description|
|---|---|---|---|---|
|`version`|string|true|none|Schema version of the config.package.json.|
|`packages`|[object]|true|none|List of shared packages available as part of the service.|
|`» version`|string|true|none|Version of the shared package. **MUST** be in semantic version.|
|`» name`|string|true|none|Name of the package. This is the unique id of the package which can be used as<br>bare-id reference in ESM import statements. It **MUST** follow NPM naming rules: `[@namespace/]packageName`<br>where `packageName` and `namespace` cannot contain `/`. Namespace is optional.|
|`» path`|string|true|none|Path to the package's folder. It **MUST** be relative to the service root.|
|`» main`|string|true|none|Path to the main module. It **MUST** be elative to the package folder and **MUST** contain filename with extension. This is the main module for the package, which is loaded by default.|
|`» dependencies`|object|false|none|Defines the required dependency versions. It is a `_packageName_-_version_` map, where every entry identifies a given package and the required version, which **MUST** be imported by the current package.|
|`»» **additionalProperties**`|string|false|none|A `_packageName_-_version_` entry which defines the required version for the current package. The version definition can be an exact version or a semver compatible version range definition.|

